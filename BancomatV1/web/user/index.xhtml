<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Facelet Title</title>
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"/>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
        <h:outputStylesheet name="css/jsfcrud.css"/>
        <style>
            html,body,h1,h2,h3,h4,h5 {
                font-family: "Raleway", sans-serif
            }
        </style>
    </h:head>
    <h:body class="w3-light-grey">
        <!-- Top container -->
        <div class="w3-bar w3-top w3-black w3-large" style="z-index:4">
            <button class="w3-bar-item w3-button w3-hide-large w3-hover-none w3-hover-text-light-grey" onclick="w3_open();"><i class="fa fa-bars"></i>  Menu</button>
            <span class="w3-bar-item w3-left">Espace utilisateur</span>
        </div>

        <!-- Sidebar/menu -->
        <nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:300px;" id="mySidebar"><br/>
            <div class="w3-container w3-row">
                <div class="w3-col s4">
                    <h:graphicImage value="resources/images/avatar.png" alt="Avatar" class="w3-circle w3-margin-right" style="width:46px"/>
                </div>
                <div class="w3-col s8 w3-bar">
                    <h:outputText value="#{userController.selected.firstName}"></h:outputText>
                    <span>Bienvenu, #{request.getRemoteUser()}<strong></strong></span><br/>
                    <a href="#" class="w3-bar-item w3-button"><i class="fa fa-envelope"></i></a>
                    <a href="#" class="w3-bar-item w3-button"><i class="fa fa-user"></i></a>
                    <a href="#" class="w3-bar-item w3-button"><i class="fa fa-cog"></i></a>
                </div>
            </div>
            <hr/>
            <div class="w3-container">
                <h5>Tableau de bord</h5>
            </div>
            <div class="w3-bar-block">
                <h:form>
                    <p:growl id="growl" sticky="true" showDetail="true"/>
                    <a href="#" class="w3-bar-item w3-button w3-padding-16 w3-hide-large w3-dark-grey w3-hover-black" onclick="w3_close()" title="close menu"><i class="fa fa-remove fa-fw"></i>  Close Menu</a>
                    <a href="#" class="w3-bar-item w3-button w3-padding w3-blue"><i class="fa fa-users fa-fw"></i>  Mes comptes</a>
                    <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-eye fa-fw"></i>  Déposer de l'argent</a>
                    <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-users fa-fw"></i>  Retirer de l'argent</a>
                    <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-bullseye fa-fw"></i>  Transférer de l'argent</a>
                    <a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-diamond fa-fw"></i>  Historiques</a>
                    <h:commandLink action="#{userController.logout}" value="Se déconnecter" class="w3-bar-item w3-button w3-padding"/>
                </h:form>
            </div>
        </nav>
        <!-- Overlay effect when opening sidebar on small screens -->
        <div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

        <!-- !PAGE CONTENT! -->
        <div class="w3-main" style="margin-left:300px;margin-top:43px;">

            <!-- Header -->
            <header class="w3-container" style="padding-top:22px">
                <h5><b><i class="fa fa-dashboard"></i> Ma banque</b></h5>
            </header>
            <div class="w3-row-padding w3-margin-bottom">
                <div class="w3-quarter">
                    <div class="w3-container w3-red w3-padding-16">
                        <div class="w3-left"><i class="fa fa-comment w3-xxxlarge"></i></div>
                        <div class="w3-right">
                            <h3>52</h3>
                        </div>
                        <div class="w3-clear"></div>
                    </div>
                </div>
                <div class="w3-quarter">
                    <div class="w3-container w3-blue w3-padding-16">
                        <div class="w3-left"><i class="fa fa-eye w3-xxxlarge"></i></div>
                        <div class="w3-right">
                            <h3>99</h3>
                        </div>
                        <div class="w3-clear"></div>
                        <h4>Views</h4>
                    </div>
                </div>
                <div class="w3-quarter">
                    <div class="w3-container w3-teal w3-padding-16">
                        <div class="w3-left"><i class="fa fa-share-alt w3-xxxlarge"></i></div>
                        <div class="w3-right">
                            <h3>23</h3>
                        </div>
                        <div class="w3-clear"></div>
                        <h4>Shares</h4>
                    </div>
                </div>
                <div class="w3-quarter">
                    <div class="w3-container w3-orange w3-text-white w3-padding-16">
                        <div class="w3-left"><i class="fa fa-users w3-xxxlarge"></i></div>
                        <div class="w3-right">
                            <h3>50</h3>
                        </div>
                        <div class="w3-clear"></div>
                        <h4>Users</h4>
                    </div>
                </div>
            </div>

            <div class="w3-panel">

                <div class="w3-row-padding" style="margin:0 -16px">
                    <h:form>
                        <div class="w3-twothird">
                            <h5>Mes comptes</h5>
                            <h:panelGroup rendered="#{accountController.selected.userId.accountCollection.size() > 0}">
                                <h:outputText value="#{accountController.pagination.pageFirstItem + 1}..#{accountController.pagination.pageLastItem + 1}/#{accountController.pagination.itemsCount}"/>&nbsp;
                                <h:commandLink action="#{accountController.previous}" value="#{bundle.Previous} #{accountController.pagination.pageSize}" rendered="#{accountController.pagination.hasPreviousPage}"/>&nbsp;
                                <h:commandLink action="#{accountController.next}" value="#{bundle.Next} #{accountController.pagination.pageSize}" rendered="#{accountController.pagination.hasNextPage}"/>&nbsp;
                                <h:dataTable value="#{accountController.findByUserId()}" var="item" class="w3-table w3-striped w3-white">
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{bundle.ListAccountTitle_accountNumber}"/>
                                        </f:facet>
                                        <h:outputText value="#{item.accountNumber}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{bundle.CreateAccountTypeLabel_name}"/>
                                        </f:facet>
                                        <h:outputText value="#{item.accountTypeId.name}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{bundle.ListAccountTitle_balance}"/>
                                        </f:facet>
                                        <h:outputText value="#{item.balance}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{bundle.CreateAccountTypeLabel_interestRate}"/>
                                        </f:facet>
                                        <h:outputText value="#{item.accountTypeId.interestRate}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{bundle.CreateAccountTypeLabel_withdrawalLimit}"/>
                                        </f:facet>
                                        <h:outputText value="#{item.accountTypeId.withdrawalLimit}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="&nbsp;"/>
                                        </f:facet>
                                        <h:commandLink action="#{accountController.prepareView}" value="Détails"/>
                                        <h:outputText value=" "/>
                                        <h:commandLink action="#{accountController.prepareEdit}" value="Editer"/>
                                        <h:outputText value=" "/>
                                        <h:commandLink action="#{accountController.destroy}" value="Supprimer"/>
                                    </h:column>
                                </h:dataTable>
                            </h:panelGroup>
                        </div>
                    </h:form>
                </div>
            </div>
            <button class="w3-btn btn w3-green w3-section" onclick="document.getElementById('demand').style.display = 'block'">Ouvrir un nouveau compte</button>
        </div>
        <!--Demand modal-->
        <div id="demand" class="w3-modal">
            <div class="w3-modal-content w3-card-4 w3-animate-zoom" style="max-width:600px">

                <!--Modal header-->
                <div class="w3-center"><br/>
                    <span onclick="document.getElementById('demand').style.display = 'none'" class="w3-button w3-xlarge w3-hover-red w3-display-topright" title="Close Modal">&times;</span>
                    <h:graphicImage value="resources/images/account.png" alt="Avatar" style="width:30%" class="w3-circle w3-margin-top"/>
                </div>

                <!--Demand form-->
                <h:form class="w3-container">
                    <div class="w3-section">
                        <label><strong><h4>Quel type de compte souhaitez-vous ouvrir</h4></strong></label>
                        <h:selectOneMenu class="w3-select" id="accountTypeId" value="#{demandController.selected.accountTypeId}" title="#{bundle.CreateDemandTitle_accountTypeId}" required="true" requiredMessage="#{bundle.CreateDemandRequiredMessage_accountTypeId}">
                            <f:selectItems value="#{accountTypeController.itemsAvailableSelectOne}"/>
                        </h:selectOneMenu>
                        <h:commandButton class="w3-btn w3-round-xxlarge btn w3-block w3-green w3-section" value="Soumettre la demande" action="#{demandController.create()}"></h:commandButton>
                        </div>
                </h:form>
            </div>
        </div>
    </h:body>
</html>
